

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Troubleshooting &mdash; GRASP 2.0.0 documentation</title>
  

  
  
  
  
  
  
  
  
  <meta name="theme-color" content="#ffffff">


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="_static/js/jquery.easy-autocomplete.min.js" type="text/javascript" ></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href="_static/css/easy-autocomplete.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/cobra.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="GRASP 2.0.0 documentation" href="index.html"/>
        <link rel="next" title="API documentation" href="api_doc.html"/>
        <link rel="prev" title="Tutorials" href="tutorials.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GRASP
          

          
          </a>
          <h1>GRASP</h1>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" id="simple"/>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <script>
    	var options = {

		url: "_static/json/functions.json",

		getValue: "name",

		list: {
            onKeyEnterEvent: function(item) {
                    return "_static/../" + item.website_url
            },
            maxNumberOfElements: 25,
			match: {
					enabled: true,
			},
            sort: {
			    enabled: true
		    }
		},

    	template: {
	    	type: "custom",
		    method: function(value, item) {
                return "<span><a href='search.html?q=" + item.name + "&check_keywords=yes&area=default'>" + value + "</a>" + "<a href='_static/../" + item.website_url + "' ><img src='_static/link.svg'/></a></span>";
		    }
	    },

		theme: "square"

	};

	$("#simple").easyAutocomplete(options);


    </script>
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
              </ul>
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_build_a_model.html">How to build a model</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_analysis.html">Model analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualizing results</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-jacobian-matrix-is-not-square-hint-check-if-the-correct-metabolites-are-set-as-constants">‘The jacobian matrix is not square. Hint: check if the correct metabolites are set as constants.’</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-your-metabolite-concentration-ranges-in-thermomets-in-particular-for-minimum-values-set-to-0-change-them-to-a-low-number-like-10-15">‘Check your metabolite concentration ranges in thermoMets. In particular for minimum values set to 0 change them to a low number like 10^15.’</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-initial-point-obtained-from-tmfa-is-not-thermodynamically-feasible">‘The initial point obtained from TMFA is not thermodynamically feasible.’</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-flux-directions-are-not-consistent-please-make-sure-that-both-the-lower-and-upper-bound-of-the-flux-ranges-fluxmean-2-fluxstd-and-fluxmean-2-fluxstd-respectively-are-either-positive-or-negative">‘The flux directions are not consistent. Please make sure that both the lower and upper bound of the flux ranges (fluxMean - 2*fluxStd and fluxMean + 2*fluxStd, respectively) are either positive or negative.’</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-tmfa-problem-is-infeasible-verify-that-the-standard-gibbs-free-energy-and-metabolite-concentration-values-are-valid-correct">‘The TMFA problem is infeasible. Verify that the standard Gibbs free energy and metabolite concentration values are valid/correct.’</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-tmfa-is-infeasible-the-milp-model-has-been-written-in-the-examples-folder-so-that-you-can-inspect-it">‘The TMFA is infeasible. The MILP model has been written in the examples folder so that you can inspect it.’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_contribute.html">How to contribute</a></li>
</ul>

          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GRASP</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Troubleshooting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/troubleshoot.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="https://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>There are multiple errors that you can get when running GRASP.
Here we go through some of the most common (or tricky) errors, what they mean and what you can do about them.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#the-jacobian-matrix-is-not-square-hint-check-if-the-correct-metabolites-are-set-as-constants" id="id1">‘The jacobian matrix is not square. Hint: check if the correct metabolites are set as constants.’</a></p></li>
<li><p><a class="reference internal" href="#check-your-metabolite-concentration-ranges-in-thermomets-in-particular-for-minimum-values-set-to-0-change-them-to-a-low-number-like-10-15" id="id2">‘Check your metabolite concentration ranges in thermoMets. In particular for minimum values set to 0 change them to a low number like 10^15.’</a></p></li>
<li><p><a class="reference internal" href="#the-initial-point-obtained-from-tmfa-is-not-thermodynamically-feasible" id="id3">‘The initial point obtained from TMFA is not thermodynamically feasible.’</a></p></li>
<li><p><a class="reference internal" href="#the-flux-directions-are-not-consistent-please-make-sure-that-both-the-lower-and-upper-bound-of-the-flux-ranges-fluxmean-2-fluxstd-and-fluxmean-2-fluxstd-respectively-are-either-positive-or-negative" id="id4">‘The flux directions are not consistent. Please make sure that both the lower and upper bound of the flux ranges (fluxMean - 2*fluxStd and fluxMean + 2*fluxStd, respectively) are either positive or negative.’</a></p></li>
<li><p><a class="reference internal" href="#the-tmfa-problem-is-infeasible-verify-that-the-standard-gibbs-free-energy-and-metabolite-concentration-values-are-valid-correct" id="id5">‘The TMFA problem is infeasible. Verify that the standard Gibbs free energy and metabolite concentration values are valid/correct.’</a></p></li>
<li><p><a class="reference internal" href="#the-tmfa-is-infeasible-the-milp-model-has-been-written-in-the-examples-folder-so-that-you-can-inspect-it" id="id6">‘The TMFA is infeasible. The MILP model has been written in the examples folder so that you can inspect it.’</a></p></li>
</ul>
</div>
<div class="section" id="the-jacobian-matrix-is-not-square-hint-check-if-the-correct-metabolites-are-set-as-constants">
<h2><a class="toc-backref" href="#id1">‘The jacobian matrix is not square. Hint: check if the correct metabolites are set as constants.’</a><a class="headerlink" href="#the-jacobian-matrix-is-not-square-hint-check-if-the-correct-metabolites-are-set-as-constants" title="Permalink to this headline">¶</a></h2>
<p>This error can occur when running the function <cite>checkStability</cite>, which calculates the eigenvalues of the system’s Jacobian and checks if the real part of the eigenvalues is below a certain threshold.</p>
<p>The error happens when the jacobian matrix is not square. This is generally because the user has defined the wrong metabolites as fixed in the <cite>mets</cite> sheet of the excel input file.</p>
</div>
<div class="section" id="check-your-metabolite-concentration-ranges-in-thermomets-in-particular-for-minimum-values-set-to-0-change-them-to-a-low-number-like-10-15">
<h2><a class="toc-backref" href="#id2">‘Check your metabolite concentration ranges in thermoMets. In particular for minimum values set to 0 change them to a low number like 10^15.’</a><a class="headerlink" href="#check-your-metabolite-concentration-ranges-in-thermomets-in-particular-for-minimum-values-set-to-0-change-them-to-a-low-number-like-10-15" title="Permalink to this headline">¶</a></h2>
<p>This error occurs when using TMFA to find the bounds for Gibbs energies, reaction fluxes, and metabolite concentrations.</p>
<p>It often happens because the lower or upper bound value in the <cite>thermoMets</cite> sheet of the excel input file has been set to 0. If a metabolite has concentration of 0 mol/L, a very small value must be used instead, otherwise we will have numerical issues.</p>
</div>
<div class="section" id="the-initial-point-obtained-from-tmfa-is-not-thermodynamically-feasible">
<h2><a class="toc-backref" href="#id3">‘The initial point obtained from TMFA is not thermodynamically feasible.’</a><a class="headerlink" href="#the-initial-point-obtained-from-tmfa-is-not-thermodynamically-feasible" title="Permalink to this headline">¶</a></h2>
<p>We use TMFA to find ranges for fluxes, Gibbs energies, and metabolite concentrations compatible with each other. We do so by maximizing and minimizing each variable (reaction flux, Gibbs energy, and metabolite concentration) subject to the thermodynamic constraints set by TMFA.</p>
<p>At the end we take the solution to the minimization/maximization of the last variable and take the mean of the miniminum and maximum solution values for each variable as an initial point for the subsequent sampling of Gibbs energies and reactions fluxes that are thermodynamically feasible.</p>
<p>It shouldn’t happen, but it is possible that this initial point is not thermodynamically feasible. A point that is thermodynamically feasible satisfies the TMFA constraints and the sum of Gibbs energies for all reactions involved in a closed loop is zero.</p>
</div>
<div class="section" id="the-flux-directions-are-not-consistent-please-make-sure-that-both-the-lower-and-upper-bound-of-the-flux-ranges-fluxmean-2-fluxstd-and-fluxmean-2-fluxstd-respectively-are-either-positive-or-negative">
<h2><a class="toc-backref" href="#id4">‘The flux directions are not consistent. Please make sure that both the lower and upper bound of the flux ranges (fluxMean - 2*fluxStd and fluxMean + 2*fluxStd, respectively) are either positive or negative.’</a><a class="headerlink" href="#the-flux-directions-are-not-consistent-please-make-sure-that-both-the-lower-and-upper-bound-of-the-flux-ranges-fluxmean-2-fluxstd-and-fluxmean-2-fluxstd-respectively-are-either-positive-or-negative" title="Permalink to this headline">¶</a></h2>
<p>This error happens if the flux lower and upper bounds calculated in <cite>computeGibbsFreeEnergyRanges</cite> by using TMFA don’t have the same sign, i.e. are not both positive or both negative.</p>
<p>An easy fix is to make sure that the mean and standard deviation given in <cite>measRates</cite> in the excel input file lead to lower and upper bounds that are either both positive or both negative.</p>
<dl class="simple">
<dt>The flux bounds are calculated as:</dt><dd><ul class="simple">
<li><p>lower bound: fluxMean - 2*fluxStd</p></li>
<li><p>upper bound: fluxMean + 2*fluxStd</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="the-tmfa-problem-is-infeasible-verify-that-the-standard-gibbs-free-energy-and-metabolite-concentration-values-are-valid-correct">
<h2><a class="toc-backref" href="#id5">‘The TMFA problem is infeasible. Verify that the standard Gibbs free energy and metabolite concentration values are valid/correct.’</a><a class="headerlink" href="#the-tmfa-problem-is-infeasible-verify-that-the-standard-gibbs-free-energy-and-metabolite-concentration-values-are-valid-correct" title="Permalink to this headline">¶</a></h2>
<p>When you get this error it means that the given ranges for standard Gibbs energies (in <cite>thermoRxns</cite>), the ranges for reactions fluxes (given in <cite>measRates</cite>), and the ranges for metabolite concentrations (given in <cite>thermoMets</cite>) are not compatible with each other.</p>
<p>Along with this error message you also get a list of the metabolite concentrations as well as the reactions whose standard Gibbs energies are causing the error.</p>
<p>You only need to fix either the metabolite concentrations or the standard Gibbs energies, not both.</p>
<p>By using the jupyter notebook, <cite>visualize_initial_dgs_and_fluxes</cite> in <cite>visualization</cite> you can get an idea of how off the Gibbs energies and reactions fluxes are.</p>
</div>
<div class="section" id="the-tmfa-is-infeasible-the-milp-model-has-been-written-in-the-examples-folder-so-that-you-can-inspect-it">
<h2><a class="toc-backref" href="#id6">‘The TMFA is infeasible. The MILP model has been written in the examples folder so that you can inspect it.’</a><a class="headerlink" href="#the-tmfa-is-infeasible-the-milp-model-has-been-written-in-the-examples-folder-so-that-you-can-inspect-it" title="Permalink to this headline">¶</a></h2>
<p>Sometimes the TMFA problem is infeasible and our diagnostics function cannot find which reaction or metabolite is the problem, in that case, we use <cite>gurobi_iis</cite> to find which constraint or variable bounds are causing the issue and add that to the error message.</p>
<p>We also write the MILP problem into the folder where you’re running your script from (maybe the <cite>examples</cite> folder) so that you can inspect it and find out what the issue is with the given constraint or variable bounds.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_doc.html" class="btn btn-default float-right" title="API documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorials.html" class="btn btn-default" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, The GRASP developers.

    </p>
  </div>
  Built with Sphinx using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/mathjax/MathJax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  


  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>