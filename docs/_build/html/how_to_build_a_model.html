

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to build a model &mdash; GRASP 2.0.0 documentation</title>
  

  
  
  
  
  
  
  
  
  <meta name="theme-color" content="#ffffff">


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="_static/js/jquery.easy-autocomplete.min.js" type="text/javascript" ></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href="_static/css/easy-autocomplete.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/cobra.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="GRASP 2.0.0 documentation" href="index.html"/>
        <link rel="next" title="Model analysis" href="model_analysis.html"/>
        <link rel="prev" title="Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GRASP
          

          
          </a>
          <h1>GRASP</h1>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" id="simple"/>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <script>
    	var options = {

		url: "_static/json/functions.json",

		getValue: "name",

		list: {
            onKeyEnterEvent: function(item) {
                    return "_static/../" + item.website_url
            },
            maxNumberOfElements: 25,
			match: {
					enabled: true,
			},
            sort: {
			    enabled: true
		    }
		},

    	template: {
	    	type: "custom",
		    method: function(value, item) {
                return "<span><a href='search.html?q=" + item.name + "&check_keywords=yes&area=default'>" + value + "</a>" + "<a href='_static/../" + item.website_url + "' ><img src='_static/link.svg'/></a></span>";
		    }
	    },

		theme: "square"

	};

	$("#simple").easyAutocomplete(options);


    </script>
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
              </ul>
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to build a model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-excel-file-description">Input excel file description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">general</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stoic">stoic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mets">mets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rxns">rxns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#splitratios">splitRatios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#poolconst">poolConst</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thermo-ineq-constraints">thermo_ineq_constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thermorxns">thermoRxns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thermomets">thermoMets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#measrates">measRates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protdata">protData</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metsdata">metsData</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kinetics1">kinetics1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pattern-file-specification">Pattern file specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="model_analysis.html">Model analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualizing results</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_contribute.html">How to contribute</a></li>
</ul>

          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GRASP</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>How to build a model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/how_to_build_a_model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="https://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-build-a-model">
<h1>How to build a model<a class="headerlink" href="#how-to-build-a-model" title="Permalink to this headline">¶</a></h1>
<p>To build a model you need to fill in an excel file following a specific format. This is the input for GRASP, which will take it and generate a model ensemble.</p>
<p>The input file contains the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>reaction stoichiometry;</p></li>
<li><p>reaction fluxes (in micromol/gCDW/h);</p></li>
<li><p>Gibbs standard energies (in kJ/mol);</p></li>
<li><p>metabolite concentrations (in mol/L), used to calculate the reactions free Gibbs energies;</p></li>
<li><p>enzyme mechanisms;</p></li>
<li><p>enzyme regulation.</p></li>
</ul>
</div></blockquote>
<p>To define an enzyme mechanism, a pattern file needs to be specified, which defines the metabolites binding/release order. Instructions on how to specify such file can be found below in <a class="reference internal" href="#pattern-file-specification"><span class="std std-ref">Pattern file specification</span></a>.</p>
<p>Setting up the excel input file is a fairly tedious and error prone process, thus we advise you to use the python package  <a class="reference external" href="https://github.com/biosustain/set_up_grasp_models">set_up_grasp_models</a>.
This package can also be used to make sure the excel input file is valid.</p>
<p>Below is a description of every sheet and every column that must be filled in the excel input file.
An example input file can also be found in the folder <code class="docutils literal notranslate"><span class="pre">io/input</span></code>.</p>
<div class="section" id="input-excel-file-description">
<h2>Input excel file description<a class="headerlink" href="#input-excel-file-description" title="Permalink to this headline">¶</a></h2>
<p>The input file that describes the kinetic model is an <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> file.</p>
<p>It has the following sheets:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#general">general</a>: where general information such as model name, number of models in the ensemble, parallelization, etc. are defined;</p></li>
<li><p><a class="reference internal" href="#stoic">stoic</a>: where the model’s (transposed) stoichiometric matrix is defined;</p></li>
<li><p><a class="reference internal" href="#mets">mets</a>: where all the metabolites are specified;</p></li>
<li><p><a class="reference internal" href="#rxns">rxns</a>: where all reactions are specified;</p></li>
<li><p><a class="reference internal" href="#splitratios">splitRatios</a>: [TODO Pedro];</p></li>
<li><p><a class="reference internal" href="#poolconst">poolConst</a>: [TODO Pedro];</p></li>
<li><p><a class="reference internal" href="#thermo-ineq-constraints">thermo_ineq_constraints</a>: [TODO Pedro];</p></li>
<li><p><a class="reference internal" href="#thermorxns">thermoRxns</a>: where the standard Gibbs energies are specified for each reaction in the model (in kJ/mol);</p></li>
<li><p><a class="reference internal" href="#thermomets">thermoMets</a>: where the metabolite concentrations used to calculate reaction Gibbs energies are specified (in mol/L);</p></li>
<li><p><a class="reference internal" href="#measrates">measRates</a>: where known reactions fluxes are specified (in micromol/gCDW/h);</p></li>
<li><p><a class="reference internal" href="#protdata">protData</a>: where scaled proteomics data is specified - this is only relevant if you have more than one data point;</p></li>
<li><p><a class="reference internal" href="#metsdata">metsData</a>: where scaled metabolomics data is specified - this is only relevant if you have more than one data point;</p></li>
<li><p><a class="reference internal" href="#kinetics1">kinetics1</a>: where enzyme mechanisms and regulation is specified.</p></li>
</ul>
</div></blockquote>
<p>Note that the order of the reactions and metabolites in all sheets must be the same.</p>
<div class="section" id="general">
<h3>general<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<p>In the general sheet the second column must be filled by the user with:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model</span> <span class="pre">name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling</span> <span class="pre">mode</span></code>: which can be either ORACLE or rejection. ORACLE mode is used to generate models for only one data point, while rejection mode is used to generate models that can explain multiple data points [TODO Pedro plz check];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NLP</span> <span class="pre">solver</span></code>: only relevant if the sampling mode is rejection;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">of</span> <span class="pre">experimental</span> <span class="pre">conditions</span></code>: basically how many data points there are besides the reference state. If you are only using ORACLE this should be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, because there is only the reference state;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">of</span> <span class="pre">model</span> <span class="pre">structures</span></code>: how many different model structures should be considered, this refers only to regulation though, the reactions and metabolites must be the same in all structures. To specify multiple structures [… TODO Pedro];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">of</span> <span class="pre">models</span></code>: how many models should be generated;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel</span> <span class="pre">mode</span></code>: whether or not models should be sampled in parallel;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">of</span> <span class="pre">cores</span></code>: if parallel mode is ON (set to <code class="docutils literal notranslate"><span class="pre">1</span></code>), how many cores should be used;</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">``</span></a>percentile of alive particles for SMC [TODO Pedro, will this be relevant?];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute</span> <span class="pre">robust</span> <span class="pre">fluxes</span></code>: if the fluxes are known only for some reactions in the model, the unknown fluxes can be calculated by setting this option to <code class="docutils literal notranslate"><span class="pre">1</span></code>. For more info on how fluxes are calculated see <a class="reference internal" href="api_doc/ensembleFxns/compute_robust_fluxes.html#compute-robust-fluxes"><span class="std std-ref">Compute robust fluxes</span></a>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute</span> <span class="pre">thermodynamics</span></code>: if set to <code class="docutils literal notranslate"><span class="pre">1</span></code> the reaction Gibbs free energies will be calculated from the standard Gibbs energies specified in <code class="docutils literal notranslate"><span class="pre">thermoRxns</span></code> and the metabolite concentrations specified in <code class="docutils literal notranslate"><span class="pre">thermoMets</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial</span> <span class="pre">tolerance</span></code>:  [TODO Pedro];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">final</span> <span class="pre">tolerance</span></code>:  [TODO Pedro];</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="stoic">
<h3>stoic<a class="headerlink" href="#stoic" title="Permalink to this headline">¶</a></h3>
<p>In this sheet the reaction stoichiometry is specified, reactions in the rows and metabolites in the columns (it is basically a transposed stoichiometric matrix).</p>
</div>
<div class="section" id="mets">
<h3>mets<a class="headerlink" href="#mets" title="Permalink to this headline">¶</a></h3>
<p>This sheet must have 6 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metabolite</span> <span class="pre">ID</span></code>: the metabolite ids, to be used in the other sheets;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metabolite</span> <span class="pre">name</span></code>: the metabolite names;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">balanced?</span></code>: whether or not the metabolite is balanced, i.e. it is consumed and produced in the same amount, its concentration doesn’t change;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">active?</span></code>: whether or not the metabolite will be modeled;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constant?</span></code>: whether or not the metabolite should be treated as a constant;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">measured?</span></code>: whether or not the metabolite concentration has been measured experimentally;</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="rxns">
<h3>rxns<a class="headerlink" href="#rxns" title="Permalink to this headline">¶</a></h3>
<p>This sheet must have 5 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">ID</span></code>: the reaction ids, to be used in the other sheets;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">name</span></code>: the reaction names;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transport</span> <span class="pre">reaction?</span></code>: whether or not the reaction is a transport reaction;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">modelled?</span></code>: whether or not the reaction is part of the model;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isoenzymes</span></code>: if there are isoenzymes they must be specified in this column, e.g. if PFK1 and PFK2 are isoenzymes, in the isoenzymes column you should write PFK in PFK1 and PFK2 rows. This is important when the flux through the whole reaction is known but not how much is catalyzed by each isoenzyme individually. By specifying the isoenzymes in this sheet the fraction of flux catalyzed by each isoenzyme individually is sampled randomly for each model.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="splitratios">
<h3>splitRatios<a class="headerlink" href="#splitratios" title="Permalink to this headline">¶</a></h3>
<p>[TODO Pedro]</p>
</div>
<div class="section" id="poolconst">
<h3>poolConst<a class="headerlink" href="#poolconst" title="Permalink to this headline">¶</a></h3>
<p>[TODO Pedro]</p>
</div>
<div class="section" id="thermo-ineq-constraints">
<h3>thermo_ineq_constraints<a class="headerlink" href="#thermo-ineq-constraints" title="Permalink to this headline">¶</a></h3>
<p>[TODO Pedro]</p>
</div>
<div class="section" id="thermorxns">
<h3>thermoRxns<a class="headerlink" href="#thermorxns" title="Permalink to this headline">¶</a></h3>
<p>This sheet must have 3 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">ID</span></code>: the reaction ids;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">∆Gr'_min</span> <span class="pre">(kJ/mol)</span></code>: the minimum standard Gibbs energy for each reaction in kJ/mol, tipically calculated as <code class="docutils literal notranslate"><span class="pre">mean</span> <span class="pre">-</span> <span class="pre">standard_deviation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">∆Gr'_max</span> <span class="pre">(kJ/mol)</span></code>: the maximum standard Gibbs energy for each reaction in kJ/mol, tipically calculated as <code class="docutils literal notranslate"><span class="pre">mean</span> <span class="pre">+</span> <span class="pre">standard_deviation</span></code></p></li>
</ul>
</div></blockquote>
<p>The standard Gibbs energies can be obtained from <a class="reference external" href="http://equilibrator.weizmann.ac.il/">eQuilibrator</a>.</p>
</div>
<div class="section" id="thermomets">
<h3>thermoMets<a class="headerlink" href="#thermomets" title="Permalink to this headline">¶</a></h3>
<p>This sheet must have 3 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metabolite</span> <span class="pre">ID</span></code>: the metabolite ids;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span> <span class="pre">(M)</span></code>: the minimum experimental metabolite concentrations in mol/L, typically calculated as <code class="docutils literal notranslate"><span class="pre">mean</span> <span class="pre">-</span> <span class="pre">standard_deviation</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">(M)</span></code>: the maximum experimental metabolite concentrations in mol/L, typically calculated as <code class="docutils literal notranslate"><span class="pre">mean</span> <span class="pre">+</span> <span class="pre">standard_deviation</span></code>.</p></li>
</ul>
</div></blockquote>
<p>These concentrations are used, together with the standard Gibbs energies in <code class="docutils literal notranslate"><span class="pre">thermoRxns</span></code>, to calculate each reaction’s Gibbs free energy.</p>
</div>
<div class="section" id="measrates">
<h3>measRates<a class="headerlink" href="#measrates" title="Permalink to this headline">¶</a></h3>
<p>This sheet has 3 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">ID</span></code>: the reaction ids;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vref_mean</span> <span class="pre">(umol/gCDW/h)</span></code>: the average flux for the reactions whose flux is known. It should be specified in micromol/gCDW/h);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vref_std</span> <span class="pre">(umol/gCDW/h)</span></code>: the standard deviation of the measured flux. It should be specified in micromol/gCDW/h).</p></li>
</ul>
</div></blockquote>
<p>Note that here you should only specify fluxes whose values you know and are non-zero. Reactions with zero flux should not be included in the model, as these cannot be parameterized.</p>
</div>
<div class="section" id="protdata">
<h3>protData<a class="headerlink" href="#protdata" title="Permalink to this headline">¶</a></h3>
<p>This sheet is only relevant if there are experimental conditions and the sampling mode is <code class="docutils literal notranslate"><span class="pre">rejection</span></code>. It has 4 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">/</span> <span class="pre">enzyme</span> <span class="pre">ID</span></code>: the reaction ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower_bound</span></code>: the scaled lower bound for the enzyme concentration, typically <code class="docutils literal notranslate"><span class="pre">(mean</span> <span class="pre">-</span> <span class="pre">std)</span> <span class="pre">/</span> <span class="pre">mean</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: the scaled mean value for the enzyme concentration, <code class="docutils literal notranslate"><span class="pre">mean/mean</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upper_bound</span></code>: the scaled upper bound for the enzyme concentration, typically <code class="docutils literal notranslate"><span class="pre">(mean</span> <span class="pre">+</span> <span class="pre">std)</span> <span class="pre">/</span> <span class="pre">mean</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="metsdata">
<h3>metsData<a class="headerlink" href="#metsdata" title="Permalink to this headline">¶</a></h3>
<p>This sheet is only relevant if there are experimental conditions and the sampling mode is <code class="docutils literal notranslate"><span class="pre">rejection</span></code>. It sheet has 4 columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metabolite</span> <span class="pre">ID</span></code>: the metabolite ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower_bound</span></code>: the scaled lower bound for the metabolite concentration, typically <code class="docutils literal notranslate"><span class="pre">(mean</span> <span class="pre">-</span> <span class="pre">std)</span> <span class="pre">/</span> <span class="pre">mean</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: the scaled mean value for the metabolite concentration, <code class="docutils literal notranslate"><span class="pre">mean/mean</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upper_bound</span></code>: the scaled upper bound for the metabolite concentration, typically <code class="docutils literal notranslate"><span class="pre">(mean</span> <span class="pre">-</span> <span class="pre">std)</span> <span class="pre">/</span> <span class="pre">mean</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="kinetics1">
<h3>kinetics1<a class="headerlink" href="#kinetics1" title="Permalink to this headline">¶</a></h3>
<p>This sheet has at least 11 columns (more can be added to add notes regarding references and etc.):</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">ID</span></code>: the reaction IDs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kinetic</span> <span class="pre">mechanism</span></code>: the kinetic/enzyme mechanism for the reaction, e.g. ordered Bi Bi. This should be the name of the pattern file in the <code class="docutils literal notranslate"><span class="pre">patterns</span></code> folder where the mechanism is specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substrate</span> <span class="pre">order</span></code>: the binding order for the substrates. Substrates must be separated by a single space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">product</span> <span class="pre">order</span></code>: the release order for the products. Products must be separated by a single space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">promiscuous</span></code>: if the enzyme that catalyzes a given reaction is promiscuous this column should included the IDs of all the reactions catalyzed by that enzyme. Reaction IDs must be separated by a single space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inhibitors</span></code>: metabolite IDs for inhibitors of the given reaction. The binding/release of these inhibitors should be included in the pattern file that describes the enzyme mechanism.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activators</span></code>: metabolite IDs for activators of the given reaction. The binding/release of these activators should be included in the pattern file that describes the enzyme mechanism.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">negative</span> <span class="pre">effectors</span></code>: metabolite IDs for negative allosteric effectors. These do not need to be included in the reaction’s pattern file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">positive</span> <span class="pre">effectors</span></code>: metabolite IDs for positive allosteric effectors. These do not need to be included in the reaction’s pattern file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allosteric</span></code>: whether or not the reaction is allosteric. In general you set this to <code class="docutils literal notranslate"><span class="pre">1</span></code> if there are negative/positive effectors, otherwise it’s set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subunits</span></code>: how many subunits is the enzyme composed by.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="pattern-file-specification">
<span id="id3"></span><h2>Pattern file specification<a class="headerlink" href="#pattern-file-specification" title="Permalink to this headline">¶</a></h2>
<p>To define the mechanism for a given reaction/enzyme, GRASP needs a pattern file to be specified. These files should be inside the <code class="docutils literal notranslate"><span class="pre">patterns</span></code> folder, where you can find some examples as well.</p>
<p>Here we will show how to specify a pattern file.</p>
<p>Let’s consider a uni-uni mechanism as the one below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E_c</span> <span class="o">+</span> <span class="n">m_3pg_c</span> <span class="o">&lt;-&gt;</span> <span class="n">E_c</span><span class="o">&amp;</span><span class="n">m_3pg_c</span>
<span class="n">E_c</span><span class="o">&amp;</span><span class="n">m_3pg_c</span> <span class="o">&lt;-&gt;</span> <span class="n">E_c</span><span class="o">&amp;</span><span class="n">m_2pg_c</span>
<span class="n">E_c</span><span class="o">&amp;</span><span class="n">m_2pg_c</span> <span class="o">&lt;-&gt;</span> <span class="n">E_c</span> <span class="o">+</span> <span class="n">m_2pg_c</span>
</pre></div>
</div>
<p>where each line represents one elementary reaction, <code class="docutils literal notranslate"><span class="pre">E</span></code> is the enzyme, <code class="docutils literal notranslate"><span class="pre">3pg</span></code> is the substrate, and <code class="docutils literal notranslate"><span class="pre">2pg</span></code> is the product. <code class="docutils literal notranslate"><span class="pre">_c</span></code> denotes the compartment where the metabolites and enzyme are located, and it is optional.</p>
<p>The pattern file that needs to be specified for this reaction mechanism would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">2</span> <span class="n">k01</span><span class="o">.*</span><span class="n">A</span>
<span class="mi">2</span> <span class="mi">1</span> <span class="n">k02</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="n">k03</span>
<span class="mi">3</span> <span class="mi">2</span> <span class="n">k04</span>
<span class="mi">3</span> <span class="mi">1</span> <span class="n">k05</span>
<span class="mi">1</span> <span class="mi">3</span> <span class="n">k06</span><span class="o">.*</span><span class="n">P</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">k01,</span> <span class="pre">...,</span> <span class="pre">k06</span></code> are the rate constants for the elementary reactions, <code class="docutils literal notranslate"><span class="pre">A</span></code> is the substrate, and <code class="docutils literal notranslate"><span class="pre">P</span></code> the product. The two numbers at the beginning of each row represent the different enzyme states: the free enzyme (1), the enzyme bound to <code class="docutils literal notranslate"><span class="pre">A</span></code> (2), and the enzyme bound to <code class="docutils literal notranslate"><span class="pre">B</span></code> (3). The first of the two numbers is the starting state and the second is the end state, e.g. in the first line <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">k01.*A</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code> is the starting state, the free enzyme, and <code class="docutils literal notranslate"><span class="pre">2</span></code> is the end state, the enzyme bound to substrate <code class="docutils literal notranslate"><span class="pre">A</span></code>.
Since all elementary reactions must be reversible, two lines are specified for each elementary reaction, one for the forward direction, e.g. <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">k01.*A</span></code> where <code class="docutils literal notranslate"><span class="pre">A</span></code> binds to the free enzyme, and another for the reverse direction, e.g. <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">1</span> <span class="pre">k02</span></code> where <code class="docutils literal notranslate"><span class="pre">A</span></code> is released.</p>
<p>The convention for metabolite names is:</p>
<blockquote>
<div><ul class="simple">
<li><p>A, B, C, D refer to substrates;</p></li>
<li><p>P, Q, R, S refer to products;</p></li>
<li><p>I refers to inhibitors; if there is more than one, try I1, I2, I3 and make sure it worked by looking into the reactions functions;</p></li>
<li><p>Z refers to the activators; if there is more than one, try Z1, Z2, Z3 and make sure it worked by looking into the reactions functions.</p></li>
</ul>
</div></blockquote>
<p>You can also use the package <a class="reference external" href="https://github.com/biosustain/set_up_grasp_models">set_up_grasp_models</a> to generate the pattern files from a file with the elementary reactions.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>To build a model ensemble you can use the script <code class="docutils literal notranslate"><span class="pre">build_model.m</span></code> in the examples folder, which looks similar to the code below:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% maximum number of models sampled, no matter what</span>
<span class="n">maxNumberOfSamples</span> <span class="p">=</span> <span class="mi">10000</span><span class="p">;</span>

<span class="c">% threshold of the jacobian&#39;s eigenvalues</span>
<span class="n">eigThreshold</span> <span class="p">=</span> <span class="mi">10</span>^<span class="o">-</span><span class="mi">5</span><span class="p">;</span>

<span class="n">modelID</span> <span class="p">=</span> <span class="s">&#39;toy_model&#39;</span><span class="p">;</span>
<span class="n">inputFile</span> <span class="p">=</span> <span class="n">fullfile</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span> <span class="s">&#39;input&#39;</span><span class="p">,</span> <span class="n">modelID</span><span class="p">);</span>
<span class="n">outputFile</span> <span class="p">=</span> <span class="n">fullfile</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span><span class="s">&#39;output&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">modelID</span><span class="p">,</span> <span class="s">&#39;.mat&#39;</span><span class="p">]);</span>

<span class="n">ensemble</span> <span class="p">=</span> <span class="n">buildEnsemble</span><span class="p">(</span><span class="n">inputFile</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">,</span> <span class="n">maxNumberOfSamples</span><span class="p">,</span> <span class="n">eigThreshold</span><span class="p">);</span>
</pre></div>
</div>
<p>To build the model ensemble we use the <code class="docutils literal notranslate"><span class="pre">buildEnsemble</span></code> function, which takes 4 arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inputFile</span></code>: path to the input excel file;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outpuFile</span></code>: path to the output file (to be created);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxNumberOfSamples</span></code>: the maximum number of models that will be sampled no matter how many models are valid. The goal is to get the number of valid models specified in the excel input file. However, if there are no valid models (very unlikely) the program will run forever. <code class="docutils literal notranslate"><span class="pre">maxNumberOfSamples</span></code> will prevent that;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eigThreshold</span></code>: threshold for the real part of the model’s jacobian eigenvalues. Models with a eigenvalue real part higher than <code class="docutils literal notranslate"><span class="pre">eigThreshold</span></code> are discarded.</p></li>
</ul>
</div></blockquote>
<p>In general it is recommended to use the <code class="docutils literal notranslate"><span class="pre">io/input</span></code> and <code class="docutils literal notranslate"><span class="pre">io/output</span></code> folders to store your input/output files, but you can use any other folders as long as the paths are specified correctly.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="model_analysis.html" class="btn btn-default float-right" title="Model analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-default" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, The GRASP developers.

    </p>
  </div>
  Built with Sphinx using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/mathjax/MathJax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  


  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>